<?xml version="1.0"?>
<robot name="five_axis_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- Together with the transmission tags (below), a Gazebo plugin needs to be added to the 
	URDF that actually parses the transmission tags and loads the appropriate hardware interfaces and controller manager. 
-->
<gazebo>
  <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
    <robotNamespace>/five_axis_robot</robotNamespace>
    <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
  </plugin>
</gazebo>

<material name="silver">
    <color rgba="0.75 0.75 0.75 1"/>
</material>

<material name="Kinect2Black">
  	<color rgba="0 0 0 1.0"/>
</material>

<link name="world"/>

<link name="a_axis_body_link">
	<inertial>
	  <mass value="1"/>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
	</inertial>
	<visual>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="base_link_visual">
	    <mesh filename="package://five_axis_robot/meshes/a_axis_assembly.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <material name="silver">
	    <color rgba="1.0 0.0 0.0 1.0"/>
	  </material>
	</visual>
	<collision>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="base_link_collision">
	    <mesh filename="package://five_axis_robot/meshes/a_axis_assembly.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
	</collision>
</link>

  <joint name="base_to_world" type="fixed">
    <parent link="world"/>
    <child link="a_axis_body_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>


<link name="a_axis_horn_link">
	<inertial>
	  <mass value="0.2"/>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
	</inertial>
	<visual>
	  <origin rpy="0 0 0" xyz="0 0.0 0.0"/>
	  <geometry name="a_axis_horn_link_visual">
	    <mesh filename="package://five_axis_robot/meshes/a_axis_horn_link.stl" scale="0.001 0.001 0.001"/>
	    <color rgba="0.75 0.75 0.75 1.0"/>
	  </geometry>
	  <material name="silver"/>
	</visual>
	<collision>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="a_axis_horn_link_collision">
	    <mesh filename="package://five_axis_robot/meshes/a_axis_horn_link.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
	</collision>
</link>

  <joint name="a_axis_servo_to_a_axis_horn" type="revolute">
    <parent link="a_axis_body_link"/>
    <child link="a_axis_horn_link"/>
    <origin xyz="0.0537 -0.032 0.08" rpy="${0.5 * pi} 0 0"/>
    <limit lower="-${pi}" upper="${pi}" effort="10" velocity="3"/>
    <axis xyz="0 0 -1"/>
  </joint>

  <transmission name="tran1">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="a_axis_servo_to_a_axis_horn">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor1">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

<link name="c_axis_body_link">
	<inertial>
	  <mass value="1"/>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
	</inertial>
	<visual>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="tilt_link_visual">
	    <mesh filename="package://five_axis_robot/meshes/c_axis_assembly.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <material name="silver">
	    <color rgba="1.0 0.0 0.0 1.0"/>
	  </material>
	</visual>
	<collision>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="tilt_link_collision">
	    <mesh filename="package://five_axis_robot/meshes/c_axis_assembly.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
<!-- 	  <contact_coefficients kd="1.0" kp="1000.0" mu="0"/> -->
	</collision>
</link>

  <joint name="a_axis_horn_to_c_axis_body" type="fixed">
    <parent link="a_axis_horn_link"/>
    <child link="c_axis_body_link"/>
    <origin xyz="0 -0.007277 -0.007277" rpy="${0.5 * pi} 0 ${pi}"/>
    <axis xyz="0 1 0"/>
  </joint>

<link name="c_axis_horn_link">
	<inertial>
	  <mass value="0.2"/>
	  <origin rpy="0 -${0.5 * pi} 0" xyz="0 0.060723 0"/>
	  <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
	</inertial>
	<visual>
	  <origin rpy="0 -${0.5 * pi} 0" xyz="0 0.060723 0"/>
	  <geometry name="tilt_bearing_core_link_visual">
	    <mesh filename="package://five_axis_robot/meshes/c_axis_horn_link.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <material name="silver"/>
	</visual>
	<collision>
	  <origin rpy="0 -${0.5 * pi} 0" xyz="0 0.060723 0"/>
	  <geometry name="tilt_bearing_core_link_collision">
	    <mesh filename="package://five_axis_robot/meshes/c_axis_horn_link.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
	</collision>
</link>

  <joint name="c_axis_servo_to_c_axis_horn" type="revolute">
    <parent link="c_axis_body_link"/>
    <child link="c_axis_horn_link"/>
    <origin xyz="0 -0.060723 0" rpy="0 ${0.5*pi} 0"/>
    <limit lower="-${pi}" upper="${pi}" effort="10" velocity="3"/>
    <axis xyz="-1 0 0"/>
  </joint>

  <transmission name="tran2">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="c_axis_servo_to_c_axis_horn">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor2">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

<link name="rotary_table_link">
	<inertial>
	  <mass value="0.2"/>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
	</inertial>
	<visual>
	  <origin rpy="0 0 0" xyz="0 0.060723 0"/>
	  <geometry name="tilt_bearing_core_link_visual">
	    <mesh filename="package://five_axis_robot/meshes/rotary_table_link.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <material name="silver"/>
	</visual>
	<collision>
	  <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
	  <geometry name="tilt_bearing_core_link_collision">
	    <mesh filename="package://five_axis_robot/meshes/rotary_table_link.stl" scale="0.001 0.001 0.001"/>
	  </geometry>
	  <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
	</collision>
</link>

<joint name="c_axis_horn_to_rotary_table" type="fixed">
	<parent link="c_axis_horn_link"/>
	<child link="rotary_table_link"/>
	<origin xyz="0 0 0" rpy="0 -${0.5*pi} 0"/>
	<axis xyz="0 1 0"/>
</joint>

  <joint name="kinect2_joint" type="fixed">
    <insert_block name="origin"/>
    <parent link="rotary_table_link"/>
    <child link="kinect2_base_link"/>
	<origin xyz="0 0 0.0355" rpy="0 0 -${0.5*pi}"/>
  </joint>
  <link name="kinect2_base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0028247 0.00047839 0.038307"/>
      <mass value="0.82085"/>
      <inertia ixx="0.0039702" ixy="0" ixz="0" iyy="0.00059235" iyz="0" izz="0.0041195"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://five_axis_robot/meshes/kinect2.stl"/>
      </geometry>
      <material name="">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://five_axis_robot/meshes/kinect2.stl"/>
      </geometry>
    </collision>
  </link>
  
  <!-- kinect2 rgb sensor physical attachment -->
<!--   <joint name="kinect2_rgb_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.032 -0.095 0.042015"/>
    <parent link="kinect2_base_link"/>
    <child link="kinect2_rgb_link"/>
  </joint>
  <link name="kinect2_rgb_link"/> -->

  <!-- kinect2 rgb sensor frame -->
<!--   <joint name="kinect2_rgb_optical_frame_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="kinect2_rgb_link"/>
    <child link="kinect2_rgb_optical_frame"/>
  </joint>
  <link name="kinect2_rgb_optical_frame"/> -->

  <!-- kinect2 ir sensor physical attachment -->
<!--   <joint name="kinect2_ir_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.05157 0"/>
    <parent link="kinect2_rgb_link"/>
    <child link="kinect2_ir_link"/>
  </joint>
  <link name="kinect2_ir_link"/> -->
  <!-- kinect2 ir sensor frame -->
<!--   <joint name="kinect2_ir_optical_frame_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="kinect2_ir_link"/>
    <child link="kinect2_ir_optical_frame"/>
  </joint>
  <link name="kinect2_ir_optical_frame"/> -->












<!-- 
  	<link name="kinect2_link">
      <visual>
        <origin rpy="0 0 0" xyz="0.1 -0.061 0.035"/>
        <geometry>
          <mesh filename="package://five_axis_robot/meshes/kinect2_origin_on_rgb_optical_frame.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="Kinect2Black"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://five_axis_robot/meshes/kinect2_origin_on_rgb_optical_frame.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>
	</link>

    <joint name="rotary_table_to_kinect2" type="fixed">
		<parent link="rotary_table_link"/>
		<child link="kinect2_link"/>
		<origin xyz="0 0 0" rpy="-${0.5*pi} 0 ${pi}"/>
		<axis xyz="0 1 0"/>
	</joint> -->

<!-- 
    <joint name="camera_rgb_joint" type="fixed">
		<origin xyz="0 -0.0125 0" rpy="0 0 0"/>
		<parent link="rotary_table_link"/>
		<child link="camera_rgb_frame" />
    </joint>
    
    <link name="camera_rgb_frame"/>
    <joint name="camera_rgb_optical_joint" type="fixed">
      <origin xyz="0 0 0" rpy="${-0.5*pi} 0 ${-0.5*pi}" />
      <parent link="camera_rgb_frame" />
      <child link="camera_rgb_optical_frame" />
    </joint>

    <link name="camera_rgb_optical_frame"/>
    <joint name="camera_joint" type="fixed">
      <origin xyz="-0.031 0.0125 -0.016" rpy="0 0 0"/>
      <parent link="camera_rgb_frame"/>
      <child link="camera_link"/>
    </joint>  

	<link name="camera_link">
		<visual>
			<origin xyz="0 0 0" rpy="0 0 ${0.5*pi}"/>
			<geometry>
				<mesh filename="package://five_axis_robot/meshes/kinect2_origin_on_rgb_optical_frame.stl" scale="0.001 0.001 0.001"/>
			</geometry>
		</visual>
	  	<collision>
		<origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
			<geometry>
				<box size="0.07271 0.27794 0.073"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="0.564" />
			<origin xyz="0 0 0" />
			<inertia ixx="0.003881243" ixy="0.0" ixz="0.0"
				iyy="0.000498940" iyz="0.0"
				izz="0.003879257" />
		</inertial>
    </link>
 -->
</robot>
